[1mdiff --git a/assets/JS/utils/apiService.js b/assets/JS/utils/apiService.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f4b2a67[m
[1m--- /dev/null[m
[1m+++ b/assets/JS/utils/apiService.js[m
[36m@@ -0,0 +1,71 @@[m
[32m+[m[32mconst API_BASE = window?.API_BASE_URL || 'http://localhost:3000/api';[m
[32m+[m
[32m+[m[32mexport default class ApiService {[m
[32m+[m[32m  constructor() {[m
[32m+[m[32m    this.token = localStorage.getItem('token') || null;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  setToken(token) {[m
[32m+[m[32m    this.token = token;[m
[32m+[m[32m    if (token) localStorage.setItem('token', token);[m
[32m+[m[32m    else localStorage.removeItem('token');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  async request(endpoint, options = {}) {[m
[32m+[m[32m    const url = `${API_BASE}${endpoint}`;[m
[32m+[m[32m    const headers = options.headers || {};[m
[32m+[m[32m    if (!headers['Content-Type'] && !(options.body instanceof FormData))[m
[32m+[m[32m      headers['Content-Type'] = 'application/json';[m
[32m+[m[32m    if (this.token) headers['Authorization'] = `Bearer ${this.token}`;[m
[32m+[m[32m    const cfg = Object.assign([m
[32m+[m[32m      { method: 'GET', headers, credentials: 'same-origin' },[m
[32m+[m[32m      options,[m
[32m+[m[32m    );[m
[32m+[m[32m    if ([m
[32m+[m[32m      cfg.body &&[m
[32m+[m[32m      typeof cfg.body === 'object' &&[m
[32m+[m[32m      !(cfg.body instanceof FormData)[m
[32m+[m[32m    )[m
[32m+[m[32m      cfg.body = JSON.stringify(cfg.body);[m
[32m+[m[32m    const res = await fetch(url, cfg);[m
[32m+[m[32m    const text = await res.text();[m
[32m+[m[32m    let data = null;[m
[32m+[m[32m    try {[m
[32m+[m[32m      data = text ? JSON.parse(text) : null;[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      data = text;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (!res.ok) {[m
[32m+[m[32m      const err = new Error(data?.message || `HTTP ${res.status}`);[m
[32m+[m[32m      err.status = res.status;[m
[32m+[m[32m      err.payload = data;[m
[32m+[m[32m      throw err;[m
[32m+[m[32m    }[m
[32m+[m[32m    return data;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  get(endpoint, params) {[m
[32m+[m[32m    let url = endpoint;[m
[32m+[m[32m    if (params && typeof params === 'object') {[m
[32m+[m[32m      const qs = new URLSearchParams(params).toString();[m
[32m+[m[32m      url += `?${qs}`;[m
[32m+[m[32m    }[m
[32m+[m[32m    return this.request(url, { method: 'GET' });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  post(endpoint, body) {[m
[32m+[m[32m    return this.request(endpoint, { method: 'POST', body });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  put(endpoint, body) {[m
[32m+[m[32m    return this.request(endpoint, { method: 'PUT', body });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  patch(endpoint, body) {[m
[32m+[m[32m    return this.request(endpoint, { method: 'PATCH', body });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  delete(endpoint) {[m
[32m+[m[32m    return this.request(endpoint, { method: 'DELETE' });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/modules/almacen/almacen.js b/modules/almacen/almacen.js[m
[1mindex fbc9ec9..b9b4d09 100644[m
[1m--- a/modules/almacen/almacen.js[m
[1m+++ b/modules/almacen/almacen.js[m
[36m@@ -1,34 +1,58 @@[m
[32m+[m[32mimport ApiService from '../../assets/JS/utils/apiService.js';[m
[32m+[m
[32m+[m[32mconst api = new ApiService();[m
 let almacenes = [];[m
 [m
[31m-function inicializar() {[m
[31m-  renderizarAlmacenes();[m
[32m+[m[32masync function inicializar() {[m
   configurarEventosGlobales();[m
[31m-  actualizarEstadisticas();[m
[31m-  actualizarPanelesInferiores();[m
[32m+[m[32m  await cargarAlmacenes();[m
 }[m
 [m
 function renderizarAlmacenes() {[m
[31m-  const tableBody = document.getElementById("almacenes-table-body");[m
[31m-  const sinResultados = document.getElementById("sin-resultados");[m
[32m+[m[32m  const tableBody = document.getElementById('almacenes-table-body');[m
[32m+[m[32m  const sinResultados = document.getElementById('sin-resultados');[m
 [m
   if (!tableBody) {[m
[31m-    console.error("No se encontrÃ³ el table body para almacenes");[m
[32m+[m[32m    console.error('No se encontrÃ³ el table body para almacenes');[m
     return;[m
   }[m
 [m
   tableBody.innerHTML = almacenes[m
     .map((almacen) => generarFilaTabla(almacen))[m
[31m-    .join("");[m
[32m+[m[32m    .join('');[m
 [m
   // Mostrar/ocultar mensaje de sin resultados[m
   if (almacenes.length === 0) {[m
[31m-    tableBody.innerHTML = "";[m
[31m-    sinResultados.classList.remove("hidden");[m
[32m+[m[32m    tableBody.innerHTML = '';[m
[32m+[m[32m    sinResultados.classList.remove('hidden');[m
   } else {[m
[31m-    sinResultados.classList.add("hidden");[m
[32m+[m[32m    sinResultados.classList.add('hidden');[m
   }[m
 }[m
 [m
[32m+[m[32masync function cargarAlmacenes() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const res = await api.get('/almacenes');[m
[32m+[m[32m    const payload = res && res.data ? res.data : res;[m
[32m+[m[32m    if (payload && Array.isArray(payload.items))[m
[32m+[m[32m      almacenes = payload.items.map(mapServerAlmacen);[m
[32m+[m[32m    else if (Array.isArray(payload)) almacenes = payload.map(mapServerAlmacen);[m
[32m+[m[32m    else almacenes = [];[m
[32m+[m[32m    renderizarAlmacenes();[m
[32m+[m[32m    actualizarEstadisticas();[m
[32m+[m[32m    actualizarPanelesInferiores();[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    console.error('Error cargando almacenes', err);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction mapServerAlmacen(a) {[m
[32m+[m[32m  if (!a) return a;[m
[32m+[m[32m  const copy = Object.assign({}, a);[m
[32m+[m[32m  if (!copy.id && copy._id) copy.id = copy._id;[m
[32m+[m[32m  return copy;[m
[32m+[m[32m}[m
[32m+[m
 function generarFilaTabla(almacen) {[m
   const estadoInfo = getEstadoInfo(almacen.estado);[m
   const nivelOcupacion = getNivelOcupacion(almacen.ocupacion);[m
[36m@@ -37,12 +61,12 @@[m [mfunction generarFilaTabla(almacen) {[m
         <tr class="hover:bg-gray-50">[m
             <td class="px-6 py-4 whitespace-nowrap">[m
                 <div class="text-sm font-medium text-gray-900">${escapeHtml([m
[31m-                  almacen.nombre[m
[32m+[m[32m                  almacen.nombre,[m
                 )}</div>[m
             </td>[m
             <td class="px-6 py-4 whitespace-nowrap">[m
                 <div class="text-sm text-gray-900">${escapeHtml([m
[31m-                  almacen.ubicacion[m
[32m+[m[32m                  almacen.ubicacion,[m
                 )}</div>[m
             </td>[m
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">[m
[36m@@ -68,7 +92,7 @@[m [mfunction generarFilaTabla(almacen) {[m
                   estadoInfo.clase[m
                 }">[m
                     <span class="w-2 h-2 rounded-full mr-1 ${[m
[31m-                      estadoInfo.clase.replace("status-", "bg-").split(" ")[0][m
[32m+[m[32m                      estadoInfo.clase.replace('status-', 'bg-').split(' ')[0][m
                     }"></span>[m
                     ${estadoInfo.texto}[m
                 </span>[m
[36m@@ -92,20 +116,20 @@[m [mfunction generarFilaTabla(almacen) {[m
 function actualizarEstadisticas() {[m
   const totalAlmacenes = almacenes.length;[m
   const almacenesOperativos = almacenes.filter([m
[31m-    (a) => a.estado === "operativo"[m
[32m+[m[32m    (a) => a.estado === 'operativo',[m
   ).length;[m
   const almacenesMantenimiento = almacenes.filter([m
[31m-    (a) => a.estado === "mantenimiento"[m
[32m+[m[32m    (a) => a.estado === 'mantenimiento',[m
   ).length;[m
   const capacidadTotal = almacenes.reduce((sum, a) => sum + a.capacidad, 0);[m
 [m
[31m-  document.getElementById("total-almace